require("dotenv").config();
const mongoose = require("mongoose");
const model = require('./models/articles');

(async () => {
    try {
        await mongoose.connect(process.env.mongo_url)
        console.log("Connected to Database")

        await model.deleteMany({});
        console.log("Cleared collection")

        const docs =
        [
            {
                title: "Современные тенденции в искусственном интеллекте",
                authors: ["Иванов А.И.", "Петрова С.К."],
                date: new Date("2023-05-15"),
                content: "В данной статье рассматриваются последние достижения в области искусственного интеллекта, включая глубокое обучение и генеративные модели...",
                tags: ["искусственный интеллект", "машинное обучение", "нейросети"],
                reviews: [
                    {
                        name: "Алексей К.",
                        text: "Отличный обзор современных технологий!",
                        rating: 9
                    },
                    {
                        name: "Мария С.",
                        text: "Не хватает примеров практического применения",
                        rating: 7
                    }
                ]
            },
            {
                title: "Квантовые вычисления: перспективы и вызовы",
                authors: ["Сидоров В.В.", "Козлова Е.П."],
                date: new Date("2023-06-20"),
                content: "Статья посвящена анализу текущего состояния квантовых вычислений и перспективам их развития в ближайшие десятилетия...",
                tags: ["квантовые вычисления", "физика", "технологии"],
                reviews: [
                    {
                        name: "Дмитрий П.",
                        text: "Очень сложный материал для неподготовленного читателя",
                        rating: 6
                    },
                    {
                        name: "Ольга М.",
                        text: "Отличная статья! Хотелось бы больше конкретных примеров",
                        rating: 8
                    }
                ]
            },
            {
                title: "Экологически чистые источники энергии XXI века",
                authors: ["Петрова С.К.", "Васильев М.Д."],
                date: new Date("2023-04-10"),
                content: "В работе представлен анализ перспективных направлений в области возобновляемой энергетики...",
                tags: ["энергетика", "экология", "устойчивое развитие"],
                reviews: [
                    {
                        name: "Сергей Л.",
                        text: "Актуальная тема, хороший подбор данных",
                        rating: 9
                    }
                ]
            },
            {
                title: "Блокчейн технологии в финансовом секторе",
                authors: ["Кузнецов А.А."],
                date: new Date("2023-07-05"),
                content: "Исследование возможностей применения блокчейн технологий в банковской сфере и финансовых услугах...",
                tags: ["блокчейн", "финансы", "технологии"],
                reviews: [
                    {
                        name: "Анна В.",
                        text: "Интересный взгляд на будущее финансов",
                        rating: 8
                    },
                    {
                        name: "Иван К.",
                        text: "Недостаточно рассмотрены правовые аспекты",
                        rating: 5
                    },
                    {
                        name: "Елена С.",
                        text: "Отличный аналитический материал",
                        rating: 9
                    }
                ]
            },
            {
                title: "Нейроинтерфейсы: настоящее и будущее",
                authors: ["Смирнов Д.Е.", "Иванов А.И.", "Федорова Л.М."],
                date: new Date("2023-08-12"),
                content: "Комплексный обзор современных технологий нейроинтерфейсов и их потенциальных применений в медицине и повседневной жизни...",
                tags: ["нейроинтерфейсы", "медицина", "технологии"],
                reviews: [
                    {
                        name: "Павел Ш.",
                        text: "Футуристично, но реалистично",
                        rating: 10
                    },
                    {
                        name: "Татьяна М.",
                        text: "Хотелось бы больше информации о текущих исследованиях",
                        rating: 7
                    }
                ]
            },
            {
                title: "Биоинформатика в современной медицине",
                authors: ["Федорова Л.М."],
                date: new Date("2023-09-01"),
                content: "Анализ роли биоинформатики в разработке персонализированных подходов к лечению заболеваний...",
                tags: ["биоинформатика", "медицина", "генетика"],
                reviews: []
            },
            {
                title: "Кибербезопасность в эпоху интернета вещей",
                authors: ["Васильев М.Д.", "Кузнецов А.А."],
                date: new Date("2023-03-22"),
                content: "Рассмотрение основных угроз и методов защиты в условиях массового распространения IoT устройств...",
                tags: ["кибербезопасность", "интернет вещей", "технологии"],
                reviews: [
                    {
                        name: "Артем Б.",
                        text: "Важная тема, хорошо раскрыта",
                        rating: 8
                    }
                ]
            }]
        await model.insertMany(docs);
        console.log("Added collection")
    } 
    catch(error){
        console.log(error)
    }
    finally{
        await mongoose.disconnect();
        console.log("Disconnected from Database")
    }
})();